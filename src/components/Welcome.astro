---
import astroLogo from "../assets/astro.svg";
import background from "../assets/background.svg";
import "../styles/global.css";
import logo from "../assets/logo.png";
---

<div
  class="overflow-auto w-screen h-screen bg-no-repeat bg-cover bg-center bg-[url('/src/assets/huellas.png')]"
>
  <header class="lg:px-16 px-4 flex flex-wrap items-center py-4">
    <div class="flex-1 flex justify-end items-center md:justify-between">
      <img
        src="/logo.png"
        alt="Logo de Huellas del Maestro"
        class="w-32 md:w-48"
      />
    </div>
    <div class="hidden md:flex md:items-center md:w-auto w-full" id="menu">
      <nav>
        <ul
          class="md:flex items-center justify-between text-lg font-bold text-gray-600 pt-4 md:pt-0"
        >
          <li>
            <a
              class="md:p-4 py-3 px-0 block hover:text-blue-800"
              href="https://huellasdelmaestro.com/">Inicio</a>
          </li>
          <li>
            <a
              class="md:p-4 py-3 px-0 block hover:text-blue-800"
              href="https://huellasdelmaestro.com/tienda-huellas-del-maestro-simulador-musica-cocha-molina/"
              >Tienda</a>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <div class="w-[90%] mx-auto h-full flex items-center justify-between py-10">
    <div class="lg:w-fit">
      <div
        class="sm:text-6xl xs:text-5xl text-left text-white font-serif font-extrabold uppercase"
      >
        <h1>APRENDE</h1>
        <h1>EN</h1>
        <h1
          class="bg-black/50 text-white rounded-sm px-1 shadow-sm shadow-white/50"
        >
          48 HRS
        </h1>
        <h1>HOY</h1>
      </div>

      <!-- BOTÃ“N QUE ABRE EL MODAL -->
      <div
        id="openModalBtn"
        class="w-full flex items-center justify-between mt-6 py-1 px-4 uppercase bg-green-500 rounded-sm cursor-pointer"
      >
        <h3 class="text-white text-lg font-semibold">Adquiere el curso</h3>
        <div class="w-[40%] flex items-center text-gray-700 text-4xl gap-0">
          <hr class="w-full border border-gray-700 relative -right-3" />
          <ion-icon name="chevron-forward"></ion-icon>
        </div>
      </div>

      <p
        class="text-md text-white bg-black/60 font-semibold mt-1 rounded-lg p-2 text-justify"
      >
        Bienvenido a Huellas del Maestro <br />
        por el Maestro Cocha Molina aprende <br />
        a tocar el acordeÃ³n por medio de <br />
        nuestro simulador virtual.
      </p>
    </div>

    <div>
      <ul class="text-3xl text-white">
        <li class="flex p-1 bg-black/40 rounded-full h-10">
          <a
            href="https://www.facebook.com/huellasdelmaestrocm"
            target="_blank"
            rel="noopener noreferrer"
          >
            <ion-icon name="logo-facebook" class="text-white text"></ion-icon>
          </a>
        </li>
        <li class="flex p-1 bg-black/40 rounded-full mt-2 h-10">
          <a
            href="https://www.instagram.com/elcochamolina/?hl=es"
            target="_blank"
            rel="noopener noreferrer"
          >
            <ion-icon name="logo-instagram"></ion-icon>
          </a>
        </li>
        <li class="flex p-1 bg-black/40 rounded-full mt-2 h-10">
          <a
            href="https://api.whatsapp.com/send?phone=573157384040&text=Estoy%20interesado%20en%20el%20curso%20de%20acordeÃ³n%20con%20el%20Cocha"
            target="_blank"
            rel="noopener noreferrer"
          >
            <ion-icon name="logo-whatsapp"></ion-icon>
          </a>
        </li>
      </ul>
    </div>
  </div>

  <!-- MODAL -->
  <div
    id="modal"
    class="fixed inset-0 bg-black/30 backdrop-blur-md flex justify-center items-center hidden transition-opacity duration-300 ease-in-out"
  >
    <div
      class="bg-white p-6 rounded-xl w-full max-w-md shadow-xl transform scale-95 transition-transform duration-300 ease-in-out opacity-0"
      id="modal-content"
    >
      <!-- BotÃ³n de cierre -->
      <button
        id="closeModalBtn"
        class="absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-sm"
      >
        âœ–
      </button>

      <h2 class="text-3xl font-bold text-center text-gray-800 mb-6">
        RegÃ­strate para el curso
      </h2>

      <form class="space-y-4">
        <!-- Nombre -->
        <div>
          <label class="block text-gray-600 font-medium">Nombre</label>
          <input
            type="text"
            class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-400 outline-none"
            placeholder="Tu nombre"
          />
        </div>
      
        <!-- Correo ElectrÃ³nico -->
        <div>
          <label class="block text-gray-600 font-medium">Correo ElectrÃ³nico</label>
          <input
            type="email"
            class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-400 outline-none"
            placeholder="tucorreo@email.com"
          />
        </div>
      
        <!-- TelÃ©fono -->
        <div>
          <label class="block text-gray-600 font-medium">TelÃ©fono</label>
          <input
            type="text"
            class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-400 outline-none"
            placeholder="Tu nÃºmero de telÃ©fono"
          />
        </div>
        <!-- Ciudad -->
        <div>
          <label class="block text-gray-600 font-medium">Ciudad de donde nos escribe</label>
          <input
            type="text"
            class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-400 outline-none"
            placeholder="Tu ciudad"
          />
        </div>
        <!-- BotÃ³n de envÃ­o -->
        <button
          type="submit"
          class="w-full bg-green-500 text-white py-3 rounded-lg font-semibold text-lg hover:bg-green-600 transition"
        >
          Enviar
        </button>
      </form>
    </div>
  </div>
</div>

<!-- Modal de ConfirmaciÃ³n -->
<div id="confirmation-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex justify-center items-center hidden">
  <div class="bg-white p-6 rounded-lg shadow-lg w-[90%] max-w-sm text-center">
    <div id="confirmation-message"></div>
    <button onclick="document.getElementById('confirmation-modal').classList.add('hidden')"
      class="mt-4 px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition">
      Aceptar
    </button>
  </div>
</div>


<!-- SCRIPTS -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const modal = document.getElementById("modal");
    const modalContent = document.getElementById("modal-content");
    const openModalBtn = document.getElementById("openModalBtn");
    const closeModalBtn = document.getElementById("closeModalBtn");
    const confirmationModal = document.getElementById("confirmation-modal");
    const confirmationMessage = document.getElementById("confirmation-message");
    const form = modal.querySelector("form");

    const webhookURL = "https://script.google.com/macros/s/AKfycbyg4Vv4wsL_TwRrCP16-2iKSDuJxCJj1kddN8GBLQ4-YdGMNDYWEvljTbK40qlvXZQS/exec"; // Reemplaza con tu URL

    openModalBtn.addEventListener("click", function () {
      modal.classList.remove("hidden");
      setTimeout(() => {
        modal.classList.remove("opacity-0");
        modalContent.classList.remove("scale-95");
        modalContent.classList.add("scale-100", "opacity-100");
        modalContent.querySelector("input").focus();
      }, 10);
    });

    closeModalBtn.addEventListener("click", function () {
      modalContent.classList.remove("scale-100", "opacity-100");
      modalContent.classList.add("scale-95", "opacity-0");
      setTimeout(() => {
        modal.classList.add("hidden");
      }, 200);
    });

    modal.addEventListener("click", function (event) {
      if (event.target === modal) {
        closeModalBtn.click();
      }
    });

    // ðŸ‘‡ Enviar datos a Google Sheets y mostrar mensaje de Ã©xito
    form.addEventListener("submit", async function (e) {
      e.preventDefault();

      const nombre = form.querySelector('input[placeholder="Tu nombre"]').value.trim();
      const correo = form.querySelector('input[type="email"]').value.trim();
      const telefono = form.querySelector('input[placeholder="Tu nÃºmero de telÃ©fono"]').value.trim();
      const ciudad = form.querySelector('input[placeholder="Tu ciudad"]').value.trim();

      if (!nombre || !correo || !telefono || !ciudad) {
        alert("Por favor, completa todos los campos.");
        return;
      }

      try {
        await fetch(webhookURL, {
          method: "POST",
          body: JSON.stringify({ nombre, correo, telefono, ciudad }),
          headers: { "Content-Type": "application/json" },
          mode: "no-cors",
        });

        // ðŸ”¥ Mostrar modal de confirmaciÃ³n
        confirmationMessage.innerHTML = `
          <h2 class="text-xl font-bold text-gray-800">Â¡Formulario enviado con Ã©xito!</h2>
          <p class="text-gray-600 mt-2">Pronto nos contactaremos contigo.</p>
        `;
        confirmationModal.classList.remove("hidden");

        // Ocultar modal de confirmaciÃ³n despuÃ©s de 3 segundos
        setTimeout(() => {
          confirmationModal.classList.add("hidden");
        }, 3000);

        form.reset();
        closeModalBtn.click();
      } catch (error) {
        console.error(error);
        alert("Error de red o de servidor.");
      }
    });
  });
</script>



<!-- Ãconos de Ionicons -->
<script
  type="module"
  src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script
  nomodule
  src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
